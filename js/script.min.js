var useAnimations=true;var usePagination=false;var fixSidebar=false;if($("#backtop").length){$("#backtop").hide()}$(document).ready(function(){if($(".settingsBloc").length){var a=window.location.hash;if(a.length){toggleBlocks(a)}}if($.cookie("greederprefAnimations")==0){useAnimations=false}if($.cookie("greederprefPagination")==1){usePagination=true}if($.cookie("greederprefFixSidebar")==1){fixSidebar=true}$("#greederprefBloc .js-needed").remove();if($("#greederprefBloc").length){$("#greederprefBloc button#animationsButton").removeClass("disabled_button");if(!useAnimations){$("#greederprefBloc button#animationsButton").text("Off").removeClass("red").addClass("grey")}else{$("#greederprefBloc button#animationsButton").text("On").removeClass("grey").addClass("red")}$("#greederprefBloc button#paginationButton").removeClass("disabled_button").text("Off").addClass("grey");if(usePagination){$("#greederprefBloc button#paginationButton").text("On").removeClass("grey").addClass("red")}else{$("#greederprefBloc button#paginationButton").text("Off").removeClass("red").addClass("grey")}$("#greederprefBloc button#fixSidebarButton").removeClass("disabled_button").text("Off").addClass("grey");if(fixSidebar){$("#greederprefBloc button#fixSidebarButton").text("On").removeClass("grey").addClass("red")}else{$("#greederprefBloc button#fixSidebarButton").text("Off").removeClass("red").addClass("grey")}}toggleBacktop();if($(".index").length){$(window).data("ajaxready",true);$(".content").append('<div id="loader">'+_t("LOADING")+"</div>");$(window).data("page",1);$(window).data("nblus",0)}if($(window).scrollTop()==0&&!usePagination){scrollInfini(true)}if(useAnimations){$("body").removeClass("no-animations");$("#load_more").remove()}if(!usePagination){$("#pagination").remove()}if(fixSidebar){$("aside#sidebar").addClass("fixed")}});$(document).scroll(function(){toggleBacktop();if(useAnimations&&!usePagination){scrollInfini()}});function scrollInfini(g){if(typeof(g)==="undefined"){g=false}var b=navigator.userAgent.toLowerCase();var f=b.match(/(iphone|ipod|ipad)/);if($(".index").length){if($(window).data("ajaxready")==false){return}if(($(window).scrollTop()+$(window).height())+1>=$(document).height()||f&&($(window).scrollTop()+$(window).height())+150>$(document).height()||g){$(window).data("ajaxready",false);$(".content #loader").show();var e=getUrlVars()["action"];var c=getUrlVars()["folder"];var d=getUrlVars()["feed"];var a=getUrlVars()["order"];if(a){a="&order="+a}else{a=""}$.ajax({url:"./article.php",type:"post",data:"scroll="+$(window).data("page")+"&nblus="+$(window).data("nblus")+"&hightlighted=1&action="+e+"&folder="+c+"&feed="+d+a,success:function(h){if(h.replace(/^\s+/g,"").replace(/\s+$/g,"")!=""){$(".content #loader").before(h);$(".content .scriptaddbutton").remove();$(".content article.scroll").fadeIn(600);$(".content article.scroll").removeClass("scroll");$(window).data("ajaxready",true);$(window).data("page",$(window).data("page")+1);$(window).data("enCoursScroll",0);if($(window).scrollTop()==0){scrollInfini()}}else{$("#load_more").remove()}}});$(".content #loader").fadeOut(400)}}}function _t(b,a){value=i18n[b];if(a!=null){for(i=0;i<a.length;i++){value=value.replace("$"+(i+1),a[i])}}return value}function toggleFolder(a,b){feedBloc=$("ul",$(a).parent());open=0;if(feedBloc.css("display")=="none"){open=1}feedBloc.slideToggle(200);$(a).html((!open?"+":"-"));$.ajax({url:"./action.php?action=changeFolderState",data:{id:b,isopen:open}})}function addFavorite(b,c){var a=$("#pageTop").html();$.ajax({url:"./action.php?action=addFavorite",data:{id:c},success:function(d){if(d.status=="noconnect"){alert(d.texte)}else{$(".favs",$(b).parent().parent()).attr("onclick","removeFavorite(this,"+c+");");$(b).parent().parent().addClass("favorised");if(a=="favorites"){$(window).data("nblus",$(window).data("nblus")-1);$("#nbarticle").html(parseInt($("#nbarticle").html())+1)}}}})}function removeFavorite(b,c){var a=$("#pageTop").html();$.ajax({url:"./action.php?action=removeFavorite",data:{id:c},success:function(d){if(d.status=="noconnect"){alert(d.texte)}else{$(".favs",$(b).parent().parent()).attr("onclick","addFavorite(this,"+c+");");$(b).parent().parent().removeClass("favorised");if(a=="favorites"){$(window).data("nblus",$(window).data("nblus")+1);$("#nbarticle").html(parseInt($("#nbarticle").html())-1)}}}})}function renameFolder(b,c){var e=$(b).parent().parent();var a=$("span:first",e);var d=a.html();$(b).html(_t("SAVE"));$(b).attr("onclick","saveRenameFolder(this,"+c+")");a.replaceWith('<td><input type="text" name="folderName" value="'+d+'"/></td>')}function saveRenameFolder(b,c){var e=$(b).parent().parent();var a=$("td:first",e);var d=$("input",a).val();$(b).html(_t("RENAME"));$(b).attr("onclick","renameFolder(this,"+c+")");a.replaceWith("<h1>"+d+"</h1>");$.ajax({url:"./action.php?action=renameFolder",data:{id:c,name:d}})}function renameFeed(d,e){var f=$(d).parent().parent();var g=$("td:first a",f);var a=g.html();var c=$("td:first span",f);var h=$("a",c).html();var b=g.attr("href");$(d).html(_t("SAVE"));$(d).attr("onclick","saveRenameFeed(this,"+e+',"'+b+'")');g.replaceWith('<input type="text" name="feedName" value="'+a+'" size="25" />');c.replaceWith('<input type="text" name="feedUrl" value="'+h+'" size="25" />')}function saveRenameFeed(d,e,b){var f=$(d).parent().parent();var g=$('td:first input[name="feedName"]',f);var a=g.val();var c=$('td:first input[name="feedUrl"]',f);var h=c.val();$(d).html(_t("RENAME"));$(d).attr("onclick","renameFeed(this,"+e+")");g.replaceWith('<a href="'+b+'">'+a+"</a>");c.replaceWith('<span class="underlink"><a href="'+h+'">'+h+"</a></span>");$.ajax({url:"./action.php?action=renameFeed",data:{id:e,name:a,url:h}})}function changeFeedFolder(a,c){var b=$(a).val();window.location="./action.php?action=changeFeedFolder&feed="+c+"&folder="+b}function readThis(c,g,f,e){if(typeof(e)==="undefined"){e=false}var b=$("#pageTop").html();var d=$(c).parent().parent();var a=$("#"+g).next();if(!d.hasClass("eventRead")){$.ajax({url:"./action.php?action=readContent",data:{id:g},success:function(h){if(h.status=="noconnect"){alert(h.texte)}else{switch(b){case"":d.addClass("eventRead");d.fadeOut(200,function(){if(e){e()}if($("article section:last").attr("style")=="display: none;"){$(window).scrollTop($(document).height())}});$(window).data("nblus",$(window).data("nblus")+1);$("#nbarticle").html(parseInt($("#nbarticle").html())-1);break;case"selectedFolder":d.addClass("eventRead");$(window).data("nblus",$(window).data("nblus")+1);break;default:d.addClass("eventRead");break}}}})}else{if(f!="title"){$.ajax({url:"./action.php?action=unreadContent",data:{id:g},success:function(h){if(h.status=="noconnect"){alert(h.texte)}else{d.removeClass("eventRead");if((b=="")||(b=="selectedFolder")){$(window).data("nblus",$(window).data("nblus")-1)}}}})}}}function synchronize(a,b){if(a!=""){$(".content").html('<article class="article"><iframe class="importFrame" src="action.php?action=synchronize&amp;format=html&amp;code='+a+'" name="idFrameSynchro" id="idFrameSynchro" height="400"></iframe></article>');if(typeof(b)==="undefined"){b=false}if(b){$("iframe#idFrameSynchro").load(function(){b()})}}else{alert(_t("YOU_MUST_BE_CONNECTED_FEED"))}}function toggleBlocks(a){if($(a).length){$("#main section, #main article").hide();$("#main "+a+", #main "+a+" article").fadeToggle(200,function(){window.location.hash=a})}else{window.location.hash=""}}function toggleBacktop(){var a=parseInt($(window).height());if($(document).scrollTop()>=a/3){$("#backtop").show()}else{$("#backtop").hide()}}function toggleAnimations(a){var b=0;if($(a).text()=="Off"){b=1}$.cookie("greederprefAnimations",b,{expire:31536000});if(b==1){$(a).addClass("red").removeClass("grey").text("On")}else{$(a).addClass("grey").removeClass("red").text("Off")}}function togglePagination(a){var b=1;if($(a).text()=="On"){b=0}$.cookie("greederprefPagination",b,{expire:31536000});if(b==1){$(a).addClass("red").removeClass("grey").text("On")}else{$(a).addClass("grey").removeClass("red").text("Off")}}function toggleFixSidebar(a){var b=1;if($(a).text()=="On"){b=0}$.cookie("greederprefFixSidebar",b,{expire:31536000});if(b==1){$(a).addClass("red").removeClass("grey").text("On")}else{$(a).addClass("grey").removeClass("red").text("Off")}}function getUrlVars(){var d=[],c;var a=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");for(var b=0;b<a.length;b++){c=a[b].split("=");d.push(c[0]);if(c[1]){rehash=c[1].split("#");d[c[0]]=rehash[0]}else{d[c[0]]=""}}return d};